"use strict";class ViewPort{constructor(e,t,i=0){this.maxWidth=e,this.minWidth=t,this.height=i,this.gridSize=12,this.columnSize=1}GetImageSize(){return{width:this.maxWidth/12*this.columnSize,height:this.height}}}class LargeDeviceViewPort extends ViewPort{constructor(e=2e3,t=1025){super(t,e,400),this.columnSize=3,this.largeImageStyle={width:"40%",height:"100%",marginLeft:"30%"}}}class MediumDeviceViewPort extends ViewPort{constructor(e=1024,t=768){super(t,e,400),this.columnSize=12,this.largeImageStyle={width:"80%",height:"100%",marginLeft:"10%"}}}class SmallDeviceViewPort extends ViewPort{constructor(e=767,t=481){super(t,e,200),this.columnSize=6,this.largeImageStyle={width:"80%",height:"100%",marginLeft:"10%"}}}class SmallestDeviceViewPort extends ViewPort{constructor(e=480,t=320){super(t,e,200),this.columnSize=12,this.largeImageStyle={width:"80%",height:"100%",marginLeft:"10%"}}}class ViewPortFactory{constructor(e){let t=new LargeDeviceViewPort,i=new MediumDeviceViewPort,s=new SmallDeviceViewPort,r=new SmallestDeviceViewPort;this.viewPorts={},this.viewPorts[t.minWidth]=t,this.viewPorts[i.minWidth]=i,this.viewPorts[s.minWidth]=s,this.viewPorts[r.minWidth]=r,this.viewPorts[t.maxWidth]=t,this.viewPorts[i.maxWidth]=i,this.viewPorts[s.maxWidth]=s,this.viewPorts[r.maxWidth]=r}GetViewPort(e){let t=Object.keys(this.viewPorts).map(e=>parseInt(e)).find(t=>t>=e);return this.viewPorts[t]}}class ImageGallery{constructor(e,t){this.index=0,this.baseUrl=e,this.rootElement=t,this.BindCustomEvents(),this.last_known_scroll_position=0,this.ticking=!1}async DrawImageGallery(){let e=(new ViewPortFactory).GetViewPort(window.innerWidth),t=new ImageGalleryRepositry(this.baseUrl);(await t.GetImageGallery(this.index)).forEach(t=>{new ImageTemplate(t,this.rootElement,e).Append()})}BindCustomEvents(){window.onscroll=(()=>{window.innerHeight+window.scrollY>=document.body.scrollHeight&&(this.index++,this.DrawImageGallery())}),window.onload=(()=>{this.DrawImageGallery()}),window.onresize=(()=>{this.DrawImageGallery()})}}new ImageGallery(window.location.href,"imageGallery");class ImageGalleryRepositry{constructor(e){this.baseUrl=e,this.galleryCache={}}GetImageGallery(e){if(void 0!=this.galleryCache[e])return this.galleryCache[e];{let t=`${this.baseUrl}GetImageGallery/?index=${e}`;return new Promise(i=>{fetch(t).then(e=>e.json()).then(t=>{this.galleryCache[e]=t,i(t)})})}}}class ImageLargeView{constructor(e,t){this.imageData=e,this.viewPort=t,this.imagePlaceholder=document.getElementById("imagePlaceHolder"),this.InitializeOverLay(),this.DrawLargeView()}InitializeOverLay(){this.largeView=document.getElementById("largeImage"),this.largeView.style.width="100%",this.largeView.style.height="100%",this.largeView.style.position="fixed",this.largeView.style.top=0,this.largeView.style.opacity=2,this.largeView.style.cursor="pointer",this.largeView.style.display="initial",this.largeView.style.backgroundColor="rgba(0,0,0,0.5)",this.largeView.style.zIndex="2",this.largeView.onclick=(()=>{this.CloseLargeView()})}CloseLargeView(){this.imagePlaceholder.innerHTML="",this.largeView.style.display="none"}DrawLargeView(){this.AppendImage(),this.AppendCloseButton()}AppendImage(){let e=new Image;e.src=this.imageData.urls.regular,e.style.width=this.viewPort.largeImageStyle.width,e.style.height=this.viewPort.largeImageStyle.height,e.style.marginLeft=this.viewPort.largeImageStyle.marginLeft,e.style.cursor="pointer",e.style.float="left",e.onclick=(()=>{this.CloseLargeView()}),this.imagePlaceholder.appendChild(e)}AppendCloseButton(){let e=document.createElement("div");e.innerText="Close",e.style.margin="0% 0% 97% 2%",e.style.cursor="pointer",e.style.float="left",e.style.fontSize="20px",e.style.color="wheat",e.onclick=(()=>{this.CloseLargeView()}),this.imagePlaceholder.appendChild(e)}}class ImageTemplate{constructor(e,t="",i){this.imageData=e,this.rootElement=t,this.viewPort=i,this.isLargeView=!1}DrawImage(e){let t=this,i=new Image,s=this.viewPort.GetImageSize();i.src=e,i.width=s.width,i.height=s.height,i.style.margin="10px",i.style.cursor="pointer",i.onclick=function(){t.ShowLargeView()},document.getElementById(`${this.rootElement}`).appendChild(i)}Append(){this.DrawImage(this.imageData.urls.regular)}ShowLargeView(){this.isLargeView=!this.isLargeView;new ImageLargeView(this.imageData,this.viewPort)}}